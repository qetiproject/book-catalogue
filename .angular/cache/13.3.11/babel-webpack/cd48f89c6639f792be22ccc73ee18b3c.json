{"ast":null,"code":"import { finalize, tap } from 'rxjs/operators';\nimport { WHEN_TO_READ, Status, RATINGS } from '../models';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../services\";\nimport * as i3 from \"src/app/services\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@ngx-translate/core\";\n\nfunction BookDetailsComponent_ng_container_1_p_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r4 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r4, \" \");\n  }\n}\n\nfunction BookDetailsComponent_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 4)(2, \"div\", 5);\n    i0.ɵɵelement(3, \"img\", 6);\n    i0.ɵɵelementStart(4, \"p\")(5, \"span\")(6, \"strong\");\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"p\")(11, \"span\")(12, \"strong\");\n    i0.ɵɵtext(13);\n    i0.ɵɵpipe(14, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"div\", 7)(17, \"span\")(18, \"strong\");\n    i0.ɵɵtext(19);\n    i0.ɵɵpipe(20, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(21, BookDetailsComponent_ng_container_1_p_21_Template, 2, 1, \"p\", 8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(22, \"div\", 9)(23, \"h1\");\n    i0.ɵɵtext(24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"h2\");\n    i0.ɵɵtext(26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"p\");\n    i0.ɵɵtext(28);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const bookData_r2 = ctx.ngIf;\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"src\", bookData_r2.items[0].volumeInfo.imageLinks.thumbnail, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(8, 10, \"catalogue.PAGES\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", bookData_r2.items[0].volumeInfo.pageCount, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(14, 12, \"catalogue.PUBLISHED_DATE\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", bookData_r2.items[0].volumeInfo.publishedDate, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(20, 14, \"catalogue.CATEGORY\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", bookData_r2.items[0].volumeInfo.categories);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(bookData_r2.items[0].volumeInfo.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"by: \", bookData_r2.items[0].volumeInfo.publisher, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(bookData_r2.items[0].volumeInfo.description);\n  }\n}\n\nfunction BookDetailsComponent_ng_container_3_p_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"catalogue.add_book.READ\"), \" \");\n  }\n}\n\nfunction BookDetailsComponent_ng_container_3_p_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"catalogue.add_book.READ_LATER\"), \" \");\n  }\n}\n\nfunction BookDetailsComponent_ng_container_3_div_16_div_5_p_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r11 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, item_r11.label), \" \");\n  }\n}\n\nfunction BookDetailsComponent_ng_container_3_div_16_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, BookDetailsComponent_ng_container_3_div_16_div_5_p_1_Template, 3, 3, \"p\", 1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r11 = ctx.$implicit;\n    const storeData_r5 = i0.ɵɵnextContext(2).ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", storeData_r5.whenToRead == item_r11.value);\n  }\n}\n\nfunction BookDetailsComponent_ng_container_3_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"span\")(2, \"strong\");\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(5, BookDetailsComponent_ng_container_3_div_16_div_5_Template, 2, 1, \"div\", 8);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(4, 2, \"catalogue.add_book.whenToRead.TITLE\"), \":\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r8.whenToRead);\n  }\n}\n\nconst _c0 = function (a0) {\n  return {\n    selected: a0\n  };\n};\n\nfunction BookDetailsComponent_ng_container_3_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"span\", 14);\n    i0.ɵɵelement(2, \"i\", 15);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const rating_r15 = ctx.$implicit;\n    const storeData_r5 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(1, _c0, rating_r15 <= storeData_r5.rating));\n  }\n}\n\nfunction BookDetailsComponent_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 4)(2, \"div\", 10)(3, \"div\")(4, \"span\")(5, \"strong\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 7)(10, \"span\")(11, \"strong\");\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(14, BookDetailsComponent_ng_container_3_p_14_Template, 3, 3, \"p\", 1);\n    i0.ɵɵtemplate(15, BookDetailsComponent_ng_container_3_p_15_Template, 3, 3, \"p\", 1);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(16, BookDetailsComponent_ng_container_3_div_16_Template, 6, 4, \"div\", 11);\n    i0.ɵɵelementStart(17, \"div\", 7)(18, \"span\")(19, \"strong\");\n    i0.ɵɵtext(20);\n    i0.ɵɵpipe(21, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(22, BookDetailsComponent_ng_container_3_div_22_Template, 3, 3, \"div\", 12);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const storeData_r5 = ctx.ngIf;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(7, 8, \"catalogue.add_book.REVIEW\"), \":\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", storeData_r5.review, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(13, 10, \"catalogue.add_book.STATUS\"), \":\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", storeData_r5.status == ctx_r1.status.Read);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", storeData_r5.status == ctx_r1.status.ReadLater);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", storeData_r5.whenToRead);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(21, 12, \"catalogue.add_book.RATING\"), \":\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.ratings);\n  }\n}\n\nexport let BookDetailsComponent = /*#__PURE__*/(() => {\n  class BookDetailsComponent {\n    constructor(activatedRoute, fireApiService, bookApiService, loadingService, router) {\n      this.activatedRoute = activatedRoute;\n      this.fireApiService = fireApiService;\n      this.bookApiService = bookApiService;\n      this.loadingService = loadingService;\n      this.router = router;\n      this.whenToRead = WHEN_TO_READ;\n      this.status = Status;\n    }\n\n    get ratings() {\n      return RATINGS;\n    }\n\n    initBookDetails() {\n      const id = this.activatedRoute.snapshot.params['id'];\n      this.loadingService.start();\n      this.storeData$ = this.fireApiService.getBook(id).pipe(tap(book => this.bookData$ = this.bookApiService.getBooksByName(book.title)), finalize(() => this.loadingService.stop()));\n    }\n\n    ngOnInit() {\n      this.initBookDetails();\n    }\n\n    goBack() {\n      this.router.navigate(['catalogue']);\n    }\n\n  }\n\n  BookDetailsComponent.ɵfac = function BookDetailsComponent_Factory(t) {\n    return new (t || BookDetailsComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.FireApiService), i0.ɵɵdirectiveInject(i2.BookApiService), i0.ɵɵdirectiveInject(i3.LoadingService), i0.ɵɵdirectiveInject(i1.Router));\n  };\n\n  BookDetailsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: BookDetailsComponent,\n    selectors: [[\"app-book-details\"]],\n    decls: 7,\n    vars: 6,\n    consts: [[1, \"container\", \"mt-3\"], [4, \"ngIf\"], [1, \"btn\", \"btn-success\", \"mt-3\", 3, \"click\"], [1, \"fas\", \"fa-arrow-left\"], [1, \"row\"], [1, \"col-md-5\", \"col-lg-5\", \"col-xl-4\", \"col-sm-12\"], [3, \"src\"], [1, \"d-flex\"], [4, \"ngFor\", \"ngForOf\"], [1, \"col-md-7\", \"col-lg-7\", \"col-xl-8\", \"col-sm-12\"], [1, \"col-12\"], [\"class\", \"d-flex\", 4, \"ngIf\"], [\"class\", \"ms-2 rating-list\", 4, \"ngFor\", \"ngForOf\"], [1, \"ms-2\", \"rating-list\"], [1, \"pl-3\", \"selected\", 3, \"ngClass\"], [1, \"fas\", \"fa-star\", \"success\"]],\n    template: function BookDetailsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, BookDetailsComponent_ng_container_1_Template, 29, 16, \"ng-container\", 1);\n        i0.ɵɵpipe(2, \"async\");\n        i0.ɵɵtemplate(3, BookDetailsComponent_ng_container_3_Template, 23, 14, \"ng-container\", 1);\n        i0.ɵɵpipe(4, \"async\");\n        i0.ɵɵelementStart(5, \"button\", 2);\n        i0.ɵɵlistener(\"click\", function BookDetailsComponent_Template_button_click_5_listener() {\n          return ctx.goBack();\n        });\n        i0.ɵɵelement(6, \"i\", 3);\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(2, 2, ctx.bookData$));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(4, 4, ctx.storeData$));\n      }\n    },\n    directives: [i4.NgIf, i4.NgForOf, i4.NgClass],\n    pipes: [i4.AsyncPipe, i5.TranslatePipe],\n    styles: [\".rating-list[_ngcontent-%COMP%]   span.selected[_ngcontent-%COMP%]{color:#198754!important}\"]\n  });\n  return BookDetailsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}